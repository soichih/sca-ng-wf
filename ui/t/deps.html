
<!--
<script type="text/ng-template" id="taskcontroller.html">
    <button type="button" class="btn btn-xs btn-danger" ng-click="stop(dep)"
        ng-if="dep.status == 'running' || dep.status == 'running_sync'"><i class="fa fa-stop" aria-hidden="true"></i> Stop
    </button>
    <button type="button" class="btn btn-xs btn-warning" ng-click="rerun(dep)"
        ng-if="dep.status == 'failed' || dep.status == 'finished' || dep.status == 'stopped'">
        <i class="fa fa-repeat" aria-hidden="true"></i> Rerun
    </button>
</script>
-->

<!--refactor dep list and task .. which are very similar at the moment-->
<div ng-repeat="dep in deps" class="task">
    <div class="task-header">
        <i class="fa fa-circle task-circle" aria-hidden="true" ng-if="dep.status !='finished'"></i>
        <i class="fa fa-check-circle task-circle" aria-hidden="true" ng-if="dep.status =='finished'"></i>
        <h3>{{dep.service_id}}</h3>
    </div>
    <div class="task-body task-body-dep">
        <a href="{{conf.progress_url}}/#/detail/{{dep.progress_key}}" target="{{dep.progress_key}}" class="pull-right">
            <small>Progress</small>
        </a>

        <h4>
            <i class="fa fa-spinner fa-pulse" ng-if="dep.status == 'running' || dep.status == 'running_sync'"></i>
            {{dep.status|uppercase}}
            <small>{{dep.status_msg}}</small>
        </h4>

        <pre style="font-size: 50%;">TODO(config) {{dep.config|json}}</pre>
        <!--
        <center style="font-size: 30pt"><i class="fa fa-arrow-circle-down" aria-hidden="true"></i></center>
        -->
        <!--<ng-include ng-init="dep = dep" src="'taskcontroller.html'"></ng-include>-->
        <button type="button" class="btn btn-xs btn-danger" ng-click="stop(dep)"
            ng-if="dep.status == 'running' || dep.status == 'running_sync'"><i class="fa fa-stop" aria-hidden="true"></i> Stop
        </button>
        <button type="button" class="btn btn-xs btn-warning" ng-click="rerun(dep)"
            ng-if="dep.status == 'failed' || dep.status == 'finished' || dep.status == 'stopped'">
            <i class="fa fa-repeat" aria-hidden="true"></i> Rerun
        </button>
    </div>
</div>

<div class="task">
    <div class="task-header">
        <i class="fa fa-circle task-circle" aria-hidden="true" ng-if="task.status !='finished'"></i>
        <i class="fa fa-check-circle task-circle" aria-hidden="true" ng-if="task.status =='finished'"></i>
        <h3>{{task.service_id}}</h3>
    </div>
    <div class="task-body">

        <a href="{{conf.progress_url}}/#/detail/{{task.progress_key}}" target="{{task.progress_key}}" class="pull-right">
            <small>Progress</small>
        </a>

        <h4>
            <i class="fa fa-spinner fa-pulse" ng-if="task.status == 'running' || dep.status == 'running_sync'"></i>
            {{task.status|uppercase}}
            <small>{{task.status_msg}}</small>
        </h4>

        <!--<ng-include ng-init="dep = task" src="'taskcontroller.html'"></ng-include>-->
        <button type="button" class="btn btn-xs btn-danger" ng-click="stop(task)"
            ng-if="task.status == 'running'"><i class="fa fa-stop" aria-hidden="true"></i> Stop
        </button>
        <button type="button" class="btn btn-xs btn-warning" ng-click="rerun(task)"
            ng-if="task.status == 'failed' || task.status == 'finished' || task.status == 'stopped'">
            <i class="fa fa-repeat" aria-hidden="true"></i> Rerun
        </button>
    </div>
</div><!--task-->

<hr>
<b>DEBUG</b>
<pre style="font-size: 50%;">TODO(task) {{task|json}}</pre>

<!--
<pre>{{_deps|json}}</pre>
<pre>{{task|json}}</pre>
-->
